@using System.Globalization
@inject IJSRuntime JS
@inject NavigationManager Nav

<div class="segmented">
    <button class="seg @Active("en")" @onclick='() => SetCulture("en")'>EN</button>
    <button class="seg @Active("de")" @onclick='() => SetCulture("de")'>DE</button>
    <button class="seg @Active("he")" @onclick='() => SetCulture("he")'>עב</button>
</div>

@code {
    string Active(string c) => (Current == c) ? "active" : "";
    string Current => CultureInfo.CurrentUICulture.TwoLetterISOLanguageName;

    async Task SetCulture(string c)
    {
        await JS.InvokeVoidAsync("irsCulture.set", c);

        Nav.NavigateTo(Nav.Uri, forceLoad: true);
    }
}
